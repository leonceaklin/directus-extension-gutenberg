{"version":3,"sources":["@wordpress/widgets/src/blocks/widget-group/index.js"],"names":["__","createBlock","group","icon","edit","save","deprecated","name","metadata","settings","title","description","__experimentalLabel","label","transforms","from","type","isMultiBlock","blocks","isMatch","attributes","some","block","__experimentalConvert","innerBlocks","map","firstHeadingBlock","filter","content"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAT,QAAmB,iBAAnB;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAASC,KAAK,IAAIC,IAAlB,QAA8B,kBAA9B;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAEA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAWC,QAAjB;AACA,SAASA,QAAT,EAAmBD,IAAnB;AAEA,OAAO,MAAME,QAAQ,GAAG;AACvBC,EAAAA,KAAK,EAAEV,EAAE,CAAE,cAAF,CADc;AAEvBW,EAAAA,WAAW,EAAEX,EAAE,CACd,gGADc,CAFQ;AAKvBG,EAAAA,IALuB;AAMvBS,EAAAA,mBAAmB,EAAE;AAAA,QAAE;AAAEL,MAAAA,IAAI,EAAEM;AAAR,KAAF;AAAA,WAAuBA,KAAvB;AAAA,GANE;AAOvBT,EAAAA,IAPuB;AAQvBC,EAAAA,IARuB;AASvBS,EAAAA,UAAU,EAAE;AACXC,IAAAA,IAAI,EAAE,CACL;AACCC,MAAAA,IAAI,EAAE,OADP;AAECC,MAAAA,YAAY,EAAE,IAFf;AAGCC,MAAAA,MAAM,EAAE,CAAE,GAAF,CAHT;;AAICC,MAAAA,OAAO,CAAEC,UAAF,EAAcF,MAAd,EAAuB;AAC7B;AACA,eAAO,CAAEA,MAAM,CAACG,IAAP,CACNC,KAAF,IAAaA,KAAK,CAACf,IAAN,KAAe,mBADpB,CAAT;AAGA,OATF;;AAUCgB,MAAAA,qBAAqB,CAAEL,MAAF,EAAW;AAC/B;AACA,YAAIM,WAAW,GAAG,CACjB,GAAGN,MAAM,CAACO,GAAP,CAAcH,KAAF,IAAa;AAC3B,iBAAOrB,WAAW,CACjBqB,KAAK,CAACf,IADW,EAEjBe,KAAK,CAACF,UAFW,EAGjBE,KAAK,CAACE,WAHW,CAAlB;AAKA,SANE,CADc,CAAlB,CAF+B,CAY/B;AACA;;AACA,cAAME,iBAAiB,GACtBF,WAAW,CAAE,CAAF,CAAX,CAAiBjB,IAAjB,KAA0B,cAA1B,GACGiB,WAAW,CAAE,CAAF,CADd,GAEG,IAHJ,CAd+B,CAmB/B;AACA;;AACAA,QAAAA,WAAW,GAAGA,WAAW,CAACG,MAAZ,CACXL,KAAF,IAAaA,KAAK,KAAKI,iBADV,CAAd;AAIA,eAAOzB,WAAW,CACjB,mBADiB,EAEjB,EACC,IAAKyB,iBAAiB,IAAI;AACzBhB,YAAAA,KAAK,EAAEgB,iBAAiB,CAACN,UAAlB,CAA6BQ;AADX,WAA1B;AADD,SAFiB,EAOjBJ,WAPiB,CAAlB;AASA;;AA5CF,KADK;AADK,GATW;AA2DvBlB,EAAAA;AA3DuB,CAAjB","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { createBlock } from '@wordpress/blocks';\nimport { group as icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport metadata from './block.json';\nimport edit from './edit';\nimport save from './save';\nimport deprecated from './deprecated';\n\nconst { name } = metadata;\nexport { metadata, name };\n\nexport const settings = {\n\ttitle: __( 'Widget Group' ),\n\tdescription: __(\n\t\t'Create a classic widget layout with a title thatâ€™s styled by your theme for your widget areas.'\n\t),\n\ticon,\n\t__experimentalLabel: ( { name: label } ) => label,\n\tedit,\n\tsave,\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tisMultiBlock: true,\n\t\t\t\tblocks: [ '*' ],\n\t\t\t\tisMatch( attributes, blocks ) {\n\t\t\t\t\t// Avoid transforming existing `widget-group` blocks.\n\t\t\t\t\treturn ! blocks.some(\n\t\t\t\t\t\t( block ) => block.name === 'core/widget-group'\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\t__experimentalConvert( blocks ) {\n\t\t\t\t\t// Put the selected blocks inside the new Widget Group's innerBlocks.\n\t\t\t\t\tlet innerBlocks = [\n\t\t\t\t\t\t...blocks.map( ( block ) => {\n\t\t\t\t\t\t\treturn createBlock(\n\t\t\t\t\t\t\t\tblock.name,\n\t\t\t\t\t\t\t\tblock.attributes,\n\t\t\t\t\t\t\t\tblock.innerBlocks\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ),\n\t\t\t\t\t];\n\n\t\t\t\t\t// If the first block is a heading then assume this is intended\n\t\t\t\t\t// to be the Widget's \"title\".\n\t\t\t\t\tconst firstHeadingBlock =\n\t\t\t\t\t\tinnerBlocks[ 0 ].name === 'core/heading'\n\t\t\t\t\t\t\t? innerBlocks[ 0 ]\n\t\t\t\t\t\t\t: null;\n\n\t\t\t\t\t// Remove the first heading block as we're copying\n\t\t\t\t\t// it's content into the Widget Group's title attribute.\n\t\t\t\t\tinnerBlocks = innerBlocks.filter(\n\t\t\t\t\t\t( block ) => block !== firstHeadingBlock\n\t\t\t\t\t);\n\n\t\t\t\t\treturn createBlock(\n\t\t\t\t\t\t'core/widget-group',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...( firstHeadingBlock && {\n\t\t\t\t\t\t\t\ttitle: firstHeadingBlock.attributes.content,\n\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinnerBlocks\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\tdeprecated,\n};\n"]}