{"version":3,"sources":["@wordpress/edit-post/src/components/header/mode-switcher/index.js"],"names":["__","MenuItemsChoice","MenuGroup","useSelect","useDispatch","store","keyboardShortcutsStore","editorStore","editPostStore","MODES","value","label","ModeSwitcher","shortcut","isRichEditingEnabled","isCodeEditingEnabled","isEditingTemplate","mode","select","getShortcutRepresentation","getEditorSettings","richEditingEnabled","codeEditingEnabled","getEditorMode","switchEditorMode","choices","map","choice"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,EAAT,QAAmB,iBAAnB;AACA,SAASC,eAAT,EAA0BC,SAA1B,QAA2C,uBAA3C;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,iBAAvC;AACA,SAASC,KAAK,IAAIC,sBAAlB,QAAgD,+BAAhD;AACA,SAASD,KAAK,IAAIE,WAAlB,QAAqC,mBAArC;AAEA;AACA;AACA;;AACA,SAASF,KAAK,IAAIG,aAAlB,QAAuC,gBAAvC;AAEA;AACA;AACA;AACA;AACA;;AACA,MAAMC,KAAK,GAAG,CACb;AACCC,EAAAA,KAAK,EAAE,QADR;AAECC,EAAAA,KAAK,EAAEX,EAAE,CAAE,eAAF;AAFV,CADa,EAKb;AACCU,EAAAA,KAAK,EAAE,MADR;AAECC,EAAAA,KAAK,EAAEX,EAAE,CAAE,aAAF;AAFV,CALa,CAAd;;AAWA,SAASY,YAAT,GAAwB;AACvB,QAAM;AACLC,IAAAA,QADK;AAELC,IAAAA,oBAFK;AAGLC,IAAAA,oBAHK;AAILC,IAAAA,iBAJK;AAKLC,IAAAA;AALK,MAMFd,SAAS,CACVe,MAAF,KAAgB;AACfL,IAAAA,QAAQ,EAAEK,MAAM,CACfZ,sBADe,CAAN,CAERa,yBAFQ,CAEmB,4BAFnB,CADK;AAIfL,IAAAA,oBAAoB,EACnBI,MAAM,CAAEX,WAAF,CAAN,CAAsBa,iBAAtB,GAA0CC,kBAL5B;AAMfN,IAAAA,oBAAoB,EACnBG,MAAM,CAAEX,WAAF,CAAN,CAAsBa,iBAAtB,GAA0CE,kBAP5B;AAQfN,IAAAA,iBAAiB,EAAEE,MAAM,CAAEV,aAAF,CAAN,CAAwBQ,iBAAxB,EARJ;AASfC,IAAAA,IAAI,EAAEC,MAAM,CAAEV,aAAF,CAAN,CAAwBe,aAAxB;AATS,GAAhB,CADY,EAYZ,EAZY,CANb;AAoBA,QAAM;AAAEC,IAAAA;AAAF,MAAuBpB,WAAW,CAAEI,aAAF,CAAxC;;AAEA,MAAKQ,iBAAL,EAAyB;AACxB,WAAO,IAAP;AACA;;AAED,MAAK,CAAEF,oBAAF,IAA0B,CAAEC,oBAAjC,EAAwD;AACvD,WAAO,IAAP;AACA;;AAED,QAAMU,OAAO,GAAGhB,KAAK,CAACiB,GAAN,CAAaC,MAAF,IAAc;AACxC,QAAKA,MAAM,CAACjB,KAAP,KAAiBO,IAAtB,EAA6B;AAC5B,aAAO,EAAE,GAAGU,MAAL;AAAad,QAAAA;AAAb,OAAP;AACA;;AACD,WAAOc,MAAP;AACA,GALe,CAAhB;AAOA,SACC,cAAC,SAAD;AAAW,IAAA,KAAK,EAAG3B,EAAE,CAAE,QAAF;AAArB,KACC,cAAC,eAAD;AACC,IAAA,OAAO,EAAGyB,OADX;AAEC,IAAA,KAAK,EAAGR,IAFT;AAGC,IAAA,QAAQ,EAAGO;AAHZ,IADD,CADD;AASA;;AAED,eAAeZ,YAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuItemsChoice, MenuGroup } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\nimport { store as editorStore } from '@wordpress/editor';\n\n/**\n * Internal dependencies\n */\nimport { store as editPostStore } from '../../../store';\n\n/**\n * Set of available mode options.\n *\n * @type {Array}\n */\nconst MODES = [\n\t{\n\t\tvalue: 'visual',\n\t\tlabel: __( 'Visual editor' ),\n\t},\n\t{\n\t\tvalue: 'text',\n\t\tlabel: __( 'Code editor' ),\n\t},\n];\n\nfunction ModeSwitcher() {\n\tconst {\n\t\tshortcut,\n\t\tisRichEditingEnabled,\n\t\tisCodeEditingEnabled,\n\t\tisEditingTemplate,\n\t\tmode,\n\t} = useSelect(\n\t\t( select ) => ( {\n\t\t\tshortcut: select(\n\t\t\t\tkeyboardShortcutsStore\n\t\t\t).getShortcutRepresentation( 'core/edit-post/toggle-mode' ),\n\t\t\tisRichEditingEnabled:\n\t\t\t\tselect( editorStore ).getEditorSettings().richEditingEnabled,\n\t\t\tisCodeEditingEnabled:\n\t\t\t\tselect( editorStore ).getEditorSettings().codeEditingEnabled,\n\t\t\tisEditingTemplate: select( editPostStore ).isEditingTemplate(),\n\t\t\tmode: select( editPostStore ).getEditorMode(),\n\t\t} ),\n\t\t[]\n\t);\n\tconst { switchEditorMode } = useDispatch( editPostStore );\n\n\tif ( isEditingTemplate ) {\n\t\treturn null;\n\t}\n\n\tif ( ! isRichEditingEnabled || ! isCodeEditingEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst choices = MODES.map( ( choice ) => {\n\t\tif ( choice.value !== mode ) {\n\t\t\treturn { ...choice, shortcut };\n\t\t}\n\t\treturn choice;\n\t} );\n\n\treturn (\n\t\t<MenuGroup label={ __( 'Editor' ) }>\n\t\t\t<MenuItemsChoice\n\t\t\t\tchoices={ choices }\n\t\t\t\tvalue={ mode }\n\t\t\t\tonSelect={ switchEditorMode }\n\t\t\t/>\n\t\t</MenuGroup>\n\t);\n}\n\nexport default ModeSwitcher;\n"]}