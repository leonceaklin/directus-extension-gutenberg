{"version":3,"sources":["@wordpress/editor/src/components/post-visibility/index.js"],"names":["PostVisibility","onClose","instanceId","status","visibility","password","select","editorStore","getEditedPostAttribute","getEditedPostVisibility","editPost","savePost","hasPassword","setHasPassword","showPrivateConfirmDialog","setShowPrivateConfirmDialog","setPublic","setPrivate","confirmPrivate","handleDialogCancel","setPasswordProtected","updatePassword","event","target","value","visibilityOptions","public","label","info","private","PostVisibilityChoice","props"],"mappings":";;;;;;;;;AAIA;;;;AADA;;AAEA;;AAIA;;AACA;;AACA;;AAKA;;AACA;;AAjBA;AACA;AACA;;AAWA;AACA;AACA;AAIe,SAASA,cAAT,OAAuC;AAAA,MAAd;AAAEC,IAAAA;AAAF,GAAc;AACrD,QAAMC,UAAU,GAAG,4BAAeF,cAAf,CAAnB;AAEA,QAAM;AAAEG,IAAAA,MAAF;AAAUC,IAAAA,UAAV;AAAsBC,IAAAA;AAAtB,MAAmC,qBAAaC,MAAF,KAAgB;AACnEH,IAAAA,MAAM,EAAEG,MAAM,CAAEC,YAAF,CAAN,CAAsBC,sBAAtB,CAA8C,QAA9C,CAD2D;AAEnEJ,IAAAA,UAAU,EAAEE,MAAM,CAAEC,YAAF,CAAN,CAAsBE,uBAAtB,EAFuD;AAGnEJ,IAAAA,QAAQ,EAAEC,MAAM,CAAEC,YAAF,CAAN,CAAsBC,sBAAtB,CAA8C,UAA9C;AAHyD,GAAhB,CAAX,CAAzC;AAMA,QAAM;AAAEE,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAyB,uBAAaJ,YAAb,CAA/B;AAEA,QAAM,CAAEK,WAAF,EAAeC,cAAf,IAAkC,uBAAU,CAAC,CAAER,QAAb,CAAxC;AACA,QAAM,CAAES,wBAAF,EAA4BC,2BAA5B,IACL,uBAAU,KAAV,CADD;;AAGA,QAAMC,SAAS,GAAG,MAAM;AACvBN,IAAAA,QAAQ,CAAE;AACTP,MAAAA,MAAM,EAAEC,UAAU,KAAK,SAAf,GAA2B,OAA3B,GAAqCD,MADpC;AAETE,MAAAA,QAAQ,EAAE;AAFD,KAAF,CAAR;AAIAQ,IAAAA,cAAc,CAAE,KAAF,CAAd;AACA,GAND;;AAQA,QAAMI,UAAU,GAAG,MAAM;AACxBF,IAAAA,2BAA2B,CAAE,IAAF,CAA3B;AACA,GAFD;;AAIA,QAAMG,cAAc,GAAG,MAAM;AAC5BR,IAAAA,QAAQ,CAAE;AAAEP,MAAAA,MAAM,EAAE,SAAV;AAAqBE,MAAAA,QAAQ,EAAE;AAA/B,KAAF,CAAR;AACAQ,IAAAA,cAAc,CAAE,KAAF,CAAd;AACAE,IAAAA,2BAA2B,CAAE,KAAF,CAA3B;AACAJ,IAAAA,QAAQ;AACR,GALD;;AAOA,QAAMQ,kBAAkB,GAAG,MAAM;AAChCJ,IAAAA,2BAA2B,CAAE,KAAF,CAA3B;AACA,GAFD;;AAIA,QAAMK,oBAAoB,GAAG,MAAM;AAClCV,IAAAA,QAAQ,CAAE;AACTP,MAAAA,MAAM,EAAEC,UAAU,KAAK,SAAf,GAA2B,OAA3B,GAAqCD,MADpC;AAETE,MAAAA,QAAQ,EAAEA,QAAQ,IAAI;AAFb,KAAF,CAAR;AAIAQ,IAAAA,cAAc,CAAE,IAAF,CAAd;AACA,GAND;;AAQA,QAAMQ,cAAc,GAAKC,KAAF,IAAa;AACnCZ,IAAAA,QAAQ,CAAE;AAAEL,MAAAA,QAAQ,EAAEiB,KAAK,CAACC,MAAN,CAAaC;AAAzB,KAAF,CAAR;AACA,GAFD;;AAIA,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,4BAAC,iDAAD;AACC,IAAA,KAAK,EAAG,cAAI,YAAJ,CADT;AAEC,IAAA,IAAI,EAAG,cAAI,kCAAJ,CAFR;AAGC,IAAA,OAAO,EAAGvB;AAHX,IADD,EAMC;AAAU,IAAA,SAAS,EAAC;AAApB,KACC,4BAAC,0BAAD;AAAgB,IAAA,EAAE,EAAC;AAAnB,KACG,cAAI,YAAJ,CADH,CADD,EAIC,4BAAC,oBAAD;AACC,IAAA,UAAU,EAAGC,UADd;AAEC,IAAA,KAAK,EAAC,QAFP;AAGC,IAAA,KAAK,EAAGuB,yBAAkBC,MAAlB,CAAyBC,KAHlC;AAIC,IAAA,IAAI,EAAGF,yBAAkBC,MAAlB,CAAyBE,IAJjC;AAKC,IAAA,OAAO,EAAGxB,UAAU,KAAK,QAAf,IAA2B,CAAEQ,WALxC;AAMC,IAAA,QAAQ,EAAGI;AANZ,IAJD,EAYC,4BAAC,oBAAD;AACC,IAAA,UAAU,EAAGd,UADd;AAEC,IAAA,KAAK,EAAC,SAFP;AAGC,IAAA,KAAK,EAAGuB,yBAAkBI,OAAlB,CAA0BF,KAHnC;AAIC,IAAA,IAAI,EAAGF,yBAAkBI,OAAlB,CAA0BD,IAJlC;AAKC,IAAA,OAAO,EAAGxB,UAAU,KAAK,SAL1B;AAMC,IAAA,QAAQ,EAAGa;AANZ,IAZD,EAoBC,4BAAC,oBAAD;AACC,IAAA,UAAU,EAAGf,UADd;AAEC,IAAA,KAAK,EAAC,UAFP;AAGC,IAAA,KAAK,EAAGuB,yBAAkBpB,QAAlB,CAA2BsB,KAHpC;AAIC,IAAA,IAAI,EAAGF,yBAAkBpB,QAAlB,CAA2BuB,IAJnC;AAKC,IAAA,OAAO,EAAGhB,WALX;AAMC,IAAA,QAAQ,EAAGQ;AANZ,IApBD,EA4BGR,WAAW,IACZ;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,4BAAC,0BAAD;AACC,IAAA,EAAE,EAAC,OADJ;AAEC,IAAA,OAAO,EAAI,0CAA0CV,UAAY;AAFlE,KAIG,cAAI,iBAAJ,CAJH,CADD,EAOC;AACC,IAAA,SAAS,EAAC,wCADX;AAEC,IAAA,EAAE,EAAI,0CAA0CA,UAAY,EAF7D;AAGC,IAAA,IAAI,EAAC,MAHN;AAIC,IAAA,QAAQ,EAAGmB,cAJZ;AAKC,IAAA,KAAK,EAAGhB,QALT;AAMC,IAAA,WAAW,EAAG,cAAI,uBAAJ;AANf,IAPD,CA7BF,CAND,EAqDC,4BAAC,uCAAD;AACC,IAAA,MAAM,EAAGS,wBADV;AAEC,IAAA,SAAS,EAAGI,cAFb;AAGC,IAAA,QAAQ,EAAGC;AAHZ,KAKG,cAAI,oDAAJ,CALH,CArDD,CADD;AA+DA;;AAED,SAASW,oBAAT,QAA8E;AAAA,MAA/C;AAAE5B,IAAAA,UAAF;AAAcsB,IAAAA,KAAd;AAAqBG,IAAAA,KAArB;AAA4BC,IAAAA,IAA5B;AAAkC,OAAGG;AAArC,GAA+C;AAC7E,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC;AACC,IAAA,IAAI,EAAC,OADN;AAEC,IAAA,IAAI,EAAI,mCAAmC7B,UAAY,EAFxD;AAGC,IAAA,KAAK,EAAGsB,KAHT;AAIC,IAAA,EAAE,EAAI,eAAeA,KAAO,IAAItB,UAAY,EAJ7C;AAKC,wBAAoB,eAAesB,KAAO,IAAItB,UAAY,cAL3D;AAMC,IAAA,SAAS,EAAC;AANX,KAOM6B,KAPN,EADD,EAUC;AACC,IAAA,OAAO,EAAI,eAAeP,KAAO,IAAItB,UAAY,EADlD;AAEC,IAAA,SAAS,EAAC;AAFX,KAIGyB,KAJH,CAVD,EAgBC;AACC,IAAA,EAAE,EAAI,eAAeH,KAAO,IAAItB,UAAY,cAD7C;AAEC,IAAA,SAAS,EAAC;AAFX,KAIG0B,IAJH,CAhBD,CADD;AAyBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\tVisuallyHidden,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { visibilityOptions } from './utils';\nimport { store as editorStore } from '../../store';\n\nexport default function PostVisibility( { onClose } ) {\n\tconst instanceId = useInstanceId( PostVisibility );\n\n\tconst { status, visibility, password } = useSelect( ( select ) => ( {\n\t\tstatus: select( editorStore ).getEditedPostAttribute( 'status' ),\n\t\tvisibility: select( editorStore ).getEditedPostVisibility(),\n\t\tpassword: select( editorStore ).getEditedPostAttribute( 'password' ),\n\t} ) );\n\n\tconst { editPost, savePost } = useDispatch( editorStore );\n\n\tconst [ hasPassword, setHasPassword ] = useState( !! password );\n\tconst [ showPrivateConfirmDialog, setShowPrivateConfirmDialog ] =\n\t\tuseState( false );\n\n\tconst setPublic = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: '',\n\t\t} );\n\t\tsetHasPassword( false );\n\t};\n\n\tconst setPrivate = () => {\n\t\tsetShowPrivateConfirmDialog( true );\n\t};\n\n\tconst confirmPrivate = () => {\n\t\teditPost( { status: 'private', password: '' } );\n\t\tsetHasPassword( false );\n\t\tsetShowPrivateConfirmDialog( false );\n\t\tsavePost();\n\t};\n\n\tconst handleDialogCancel = () => {\n\t\tsetShowPrivateConfirmDialog( false );\n\t};\n\n\tconst setPasswordProtected = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: password || '',\n\t\t} );\n\t\tsetHasPassword( true );\n\t};\n\n\tconst updatePassword = ( event ) => {\n\t\teditPost( { password: event.target.value } );\n\t};\n\n\treturn (\n\t\t<div className=\"editor-post-visibility\">\n\t\t\t<InspectorPopoverHeader\n\t\t\t\ttitle={ __( 'Visibility' ) }\n\t\t\t\thelp={ __( 'Control how this post is viewed.' ) }\n\t\t\t\tonClose={ onClose }\n\t\t\t/>\n\t\t\t<fieldset className=\"editor-post-visibility__fieldset\">\n\t\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t\t{ __( 'Visibility' ) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"public\"\n\t\t\t\t\tlabel={ visibilityOptions.public.label }\n\t\t\t\t\tinfo={ visibilityOptions.public.info }\n\t\t\t\t\tchecked={ visibility === 'public' && ! hasPassword }\n\t\t\t\t\tonChange={ setPublic }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"private\"\n\t\t\t\t\tlabel={ visibilityOptions.private.label }\n\t\t\t\t\tinfo={ visibilityOptions.private.info }\n\t\t\t\t\tchecked={ visibility === 'private' }\n\t\t\t\t\tonChange={ setPrivate }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"password\"\n\t\t\t\t\tlabel={ visibilityOptions.password.label }\n\t\t\t\t\tinfo={ visibilityOptions.password.info }\n\t\t\t\t\tchecked={ hasPassword }\n\t\t\t\t\tonChange={ setPasswordProtected }\n\t\t\t\t/>\n\t\t\t\t{ hasPassword && (\n\t\t\t\t\t<div className=\"editor-post-visibility__password\">\n\t\t\t\t\t\t<VisuallyHidden\n\t\t\t\t\t\t\tas=\"label\"\n\t\t\t\t\t\t\thtmlFor={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create password' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"editor-post-visibility__password-input\"\n\t\t\t\t\t\t\tid={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={ updatePassword }\n\t\t\t\t\t\t\tvalue={ password }\n\t\t\t\t\t\t\tplaceholder={ __( 'Use a secure password' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</fieldset>\n\t\t\t<ConfirmDialog\n\t\t\t\tisOpen={ showPrivateConfirmDialog }\n\t\t\t\tonConfirm={ confirmPrivate }\n\t\t\t\tonCancel={ handleDialogCancel }\n\t\t\t>\n\t\t\t\t{ __( 'Would you like to privately publish this post now?' ) }\n\t\t\t</ConfirmDialog>\n\t\t</div>\n\t);\n}\n\nfunction PostVisibilityChoice( { instanceId, value, label, info, ...props } ) {\n\treturn (\n\t\t<div className=\"editor-post-visibility__choice\">\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tname={ `editor-post-visibility__setting-${ instanceId }` }\n\t\t\t\tvalue={ value }\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\taria-describedby={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__radio\"\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t\t<label\n\t\t\t\thtmlFor={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\tclassName=\"editor-post-visibility__label\"\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</label>\n\t\t\t<p\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__info\"\n\t\t\t>\n\t\t\t\t{ info }\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n"]}