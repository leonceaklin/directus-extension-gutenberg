{"version":3,"sources":["@wordpress/widgets/src/blocks/legacy-widget/edit/widget-type-selector.js"],"names":["Spinner","SelectControl","__","useSelect","store","coreStore","blockEditorStore","WidgetTypeSelector","selectedId","onSelect","widgetTypes","select","hiddenIds","getSettings","widgetTypesToHideFromLegacyWidgetBlock","getWidgetTypes","per_page","filter","widgetType","includes","id","length","value","label","map","name","selected","find","isMulti","is_multi"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,OAAT,EAAkBC,aAAlB,QAAuC,uBAAvC;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SAASC,KAAK,IAAIC,SAAlB,QAAmC,sBAAnC;AACA,SAASD,KAAK,IAAIE,gBAAlB,QAA0C,yBAA1C;AAEA,eAAe,SAASC,kBAAT,OAAwD;AAAA,MAA3B;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,GAA2B;AACtE,QAAMC,WAAW,GAAGP,SAAS,CAAIQ,MAAF,IAAc;AAAA;;AAC5C,UAAMC,SAAS,mDACdD,MAAM,CAAEL,gBAAF,CAAN,CAA2BO,WAA3B,EADc,wDACd,oBACGC,sCAFW,yEAE+B,EAF9C;AAGA,oCAAOH,MAAM,CAAEN,SAAF,CAAN,CACLU,cADK,CACW;AAAEC,MAAAA,QAAQ,EAAE,CAAC;AAAb,KADX,CAAP,0DAAO,sBAEJC,MAFI,CAEMC,UAAF,IAAkB,CAAEN,SAAS,CAACO,QAAV,CAAoBD,UAAU,CAACE,EAA/B,CAFxB,CAAP;AAGA,GAP4B,EAO1B,EAP0B,CAA7B;;AASA,MAAK,CAAEV,WAAP,EAAqB;AACpB,WAAO,cAAC,OAAD,OAAP;AACA;;AAED,MAAKA,WAAW,CAACW,MAAZ,KAAuB,CAA5B,EAAgC;AAC/B,WAAOnB,EAAE,CAAE,iCAAF,CAAT;AACA;;AAED,SACC,cAAC,aAAD;AACC,IAAA,uBAAuB,MADxB;AAEC,IAAA,KAAK,EAAGA,EAAE,CAAE,oCAAF,CAFX;AAGC,IAAA,KAAK,EAAGM,UAAH,aAAGA,UAAH,cAAGA,UAAH,GAAiB,EAHvB;AAIC,IAAA,OAAO,EAAG,CACT;AAAEc,MAAAA,KAAK,EAAE,EAAT;AAAaC,MAAAA,KAAK,EAAErB,EAAE,CAAE,eAAF;AAAtB,KADS,EAET,GAAGQ,WAAW,CAACc,GAAZ,CAAmBN,UAAF,KAAoB;AACvCI,MAAAA,KAAK,EAAEJ,UAAU,CAACE,EADqB;AAEvCG,MAAAA,KAAK,EAAEL,UAAU,CAACO;AAFqB,KAApB,CAAjB,CAFM,CAJX;AAWC,IAAA,QAAQ,EAAKH,KAAF,IAAa;AACvB,UAAKA,KAAL,EAAa;AACZ,cAAMI,QAAQ,GAAGhB,WAAW,CAACiB,IAAZ,CACdT,UAAF,IAAkBA,UAAU,CAACE,EAAX,KAAkBE,KADpB,CAAjB;AAGAb,QAAAA,QAAQ,CAAE;AACTD,UAAAA,UAAU,EAAEkB,QAAQ,CAACN,EADZ;AAETQ,UAAAA,OAAO,EAAEF,QAAQ,CAACG;AAFT,SAAF,CAAR;AAIA,OARD,MAQO;AACNpB,QAAAA,QAAQ,CAAE;AAAED,UAAAA,UAAU,EAAE;AAAd,SAAF,CAAR;AACA;AACD;AAvBF,IADD;AA2BA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Spinner, SelectControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\n\nexport default function WidgetTypeSelector( { selectedId, onSelect } ) {\n\tconst widgetTypes = useSelect( ( select ) => {\n\t\tconst hiddenIds =\n\t\t\tselect( blockEditorStore ).getSettings()\n\t\t\t\t?.widgetTypesToHideFromLegacyWidgetBlock ?? [];\n\t\treturn select( coreStore )\n\t\t\t.getWidgetTypes( { per_page: -1 } )\n\t\t\t?.filter( ( widgetType ) => ! hiddenIds.includes( widgetType.id ) );\n\t}, [] );\n\n\tif ( ! widgetTypes ) {\n\t\treturn <Spinner />;\n\t}\n\n\tif ( widgetTypes.length === 0 ) {\n\t\treturn __( 'There are no widgets available.' );\n\t}\n\n\treturn (\n\t\t<SelectControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tlabel={ __( 'Select a legacy widget to display:' ) }\n\t\t\tvalue={ selectedId ?? '' }\n\t\t\toptions={ [\n\t\t\t\t{ value: '', label: __( 'Select widget' ) },\n\t\t\t\t...widgetTypes.map( ( widgetType ) => ( {\n\t\t\t\t\tvalue: widgetType.id,\n\t\t\t\t\tlabel: widgetType.name,\n\t\t\t\t} ) ),\n\t\t\t] }\n\t\t\tonChange={ ( value ) => {\n\t\t\t\tif ( value ) {\n\t\t\t\t\tconst selected = widgetTypes.find(\n\t\t\t\t\t\t( widgetType ) => widgetType.id === value\n\t\t\t\t\t);\n\t\t\t\t\tonSelect( {\n\t\t\t\t\t\tselectedId: selected.id,\n\t\t\t\t\t\tisMulti: selected.is_multi,\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tonSelect( { selectedId: null } );\n\t\t\t\t}\n\t\t\t} }\n\t\t/>\n\t);\n}\n"]}