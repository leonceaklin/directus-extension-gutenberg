{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/media-tab/media-panel.js"],"names":["useRef","useEffect","Spinner","SearchControl","focus","__","sprintf","MediaList","useDebouncedInput","useMediaResults","InserterNoResults","INITIAL_MEDIA_ITEMS_PER_PAGE","MediaCategoryDialog","rootClientId","onInsert","category","container","timeout","setTimeout","firstTabbable","tabbable","find","current","clearTimeout","MediaCategoryPanel","search","setSearch","debouncedSearch","mediaList","per_page","media_type","mediaType","orderBy","baseCssClass","label","toLocaleLowerCase","Array","isArray","length"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport { Spinner, SearchControl } from '@wordpress/components';\nimport { focus } from '@wordpress/dom';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport MediaList from './media-list';\nimport useDebouncedInput from '../hooks/use-debounced-input';\nimport { useMediaResults } from './hooks';\nimport InserterNoResults from '../no-results';\n\nconst INITIAL_MEDIA_ITEMS_PER_PAGE = 10;\n\nexport function MediaCategoryDialog( { rootClientId, onInsert, category } ) {\n\tconst container = useRef();\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tconst [ firstTabbable ] = focus.tabbable.find( container.current );\n\t\t\tfirstTabbable?.focus();\n\t\t} );\n\t\treturn () => clearTimeout( timeout );\n\t}, [ category ] );\n\treturn (\n\t\t<div ref={ container } className=\"block-editor-inserter__media-dialog\">\n\t\t\t<MediaCategoryPanel\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\tcategory={ category }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport function MediaCategoryPanel( { rootClientId, onInsert, category } ) {\n\tconst [ search, setSearch, debouncedSearch ] = useDebouncedInput();\n\tconst mediaList = useMediaResults( {\n\t\tper_page: !! debouncedSearch ? 20 : INITIAL_MEDIA_ITEMS_PER_PAGE,\n\t\tmedia_type: category.mediaType,\n\t\tsearch: debouncedSearch,\n\t\torderBy: !! debouncedSearch ? 'relevance' : 'date',\n\t} );\n\tconst baseCssClass = 'block-editor-inserter__media-panel';\n\treturn (\n\t\t<div className={ baseCssClass }>\n\t\t\t<SearchControl\n\t\t\t\tclassName={ `${ baseCssClass }-search` }\n\t\t\t\tonChange={ setSearch }\n\t\t\t\tvalue={ search }\n\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t/* translators: %s: Name of the media category(ex. 'images, videos'). */\n\t\t\t\t\t__( 'Search %s' ),\n\t\t\t\t\tcategory.label.toLocaleLowerCase()\n\t\t\t\t) }\n\t\t\t\tplaceholder={ sprintf(\n\t\t\t\t\t/* translators: %s: Name of the media category(ex. 'images, videos'). */\n\t\t\t\t\t__( 'Search %s' ),\n\t\t\t\t\tcategory.label.toLocaleLowerCase()\n\t\t\t\t) }\n\t\t\t/>\n\t\t\t{ ! mediaList && (\n\t\t\t\t<div className={ `${ baseCssClass }-spinner` }>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ Array.isArray( mediaList ) && ! mediaList.length && (\n\t\t\t\t<InserterNoResults />\n\t\t\t) }\n\t\t\t{ !! mediaList?.length && (\n\t\t\t\t<MediaList\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tonClick={ onInsert }\n\t\t\t\t\tmediaList={ mediaList }\n\t\t\t\t\tmediaType={ category.mediaType }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n"]}