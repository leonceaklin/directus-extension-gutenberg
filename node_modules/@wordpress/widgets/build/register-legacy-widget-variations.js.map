{"version":3,"sources":["@wordpress/widgets/src/register-legacy-widget-variations.js"],"names":["registerLegacyWidgetVariations","settings","unsubscribe","hiddenIds","widgetTypesToHideFromLegacyWidgetBlock","widgetTypes","coreStore","getWidgetTypes","per_page","filter","widgetType","includes","id","blocksStore","addBlockVariations","map","name","title","description","attributes","is_multi","idBase","instance"],"mappings":";;;;;;;AAGA;;AACA;;AACA;;AALA;AACA;AACA;AAKe,SAASA,8BAAT,CAAyCC,QAAzC,EAAoD;AAClE,QAAMC,WAAW,GAAG,qBAAW,MAAM;AAAA;;AACpC,UAAMC,SAAS,4BACdF,QADc,aACdA,QADc,uBACdA,QAAQ,CAAEG,sCADI,yEACsC,EADrD;AAEA,UAAMC,WAAW,4BAAG,kBAAQC,eAAR,EAClBC,cADkB,CACF;AAAEC,MAAAA,QAAQ,EAAE,CAAC;AAAb,KADE,CAAH,0DAAG,sBAEjBC,MAFiB,CAEPC,UAAF,IAAkB,CAAEP,SAAS,CAACQ,QAAV,CAAoBD,UAAU,CAACE,EAA/B,CAFX,CAApB;;AAGA,QAAKP,WAAL,EAAmB;AAClBH,MAAAA,WAAW;AACX,0BAAUW,aAAV,EAAwBC,kBAAxB,CACC,oBADD,EAECT,WAAW,CAACU,GAAZ,CAAmBL,UAAF,KAAoB;AACpCM,QAAAA,IAAI,EAAEN,UAAU,CAACE,EADmB;AAEpCK,QAAAA,KAAK,EAAEP,UAAU,CAACM,IAFkB;AAGpCE,QAAAA,WAAW,EAAER,UAAU,CAACQ,WAHY;AAIpCC,QAAAA,UAAU,EAAET,UAAU,CAACU,QAAX,GACT;AACAC,UAAAA,MAAM,EAAEX,UAAU,CAACE,EADnB;AAEAU,UAAAA,QAAQ,EAAE;AAFV,SADS,GAKT;AACAV,UAAAA,EAAE,EAAEF,UAAU,CAACE;AADf;AATiC,OAApB,CAAjB,CAFD;AAgBA;AACD,GAzBmB,CAApB;AA0BA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { subscribe, select, dispatch } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { store as blocksStore } from '@wordpress/blocks';\n\nexport default function registerLegacyWidgetVariations( settings ) {\n\tconst unsubscribe = subscribe( () => {\n\t\tconst hiddenIds =\n\t\t\tsettings?.widgetTypesToHideFromLegacyWidgetBlock ?? [];\n\t\tconst widgetTypes = select( coreStore )\n\t\t\t.getWidgetTypes( { per_page: -1 } )\n\t\t\t?.filter( ( widgetType ) => ! hiddenIds.includes( widgetType.id ) );\n\t\tif ( widgetTypes ) {\n\t\t\tunsubscribe();\n\t\t\tdispatch( blocksStore ).addBlockVariations(\n\t\t\t\t'core/legacy-widget',\n\t\t\t\twidgetTypes.map( ( widgetType ) => ( {\n\t\t\t\t\tname: widgetType.id,\n\t\t\t\t\ttitle: widgetType.name,\n\t\t\t\t\tdescription: widgetType.description,\n\t\t\t\t\tattributes: widgetType.is_multi\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tidBase: widgetType.id,\n\t\t\t\t\t\t\t\tinstance: {},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tid: widgetType.id,\n\t\t\t\t\t\t  },\n\t\t\t\t} ) )\n\t\t\t);\n\t\t}\n\t} );\n}\n"]}