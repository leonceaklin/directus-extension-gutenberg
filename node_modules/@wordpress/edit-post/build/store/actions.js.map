{"version":3,"sources":["@wordpress/edit-post/src/store/actions.js"],"names":["openGeneralSidebar","name","registry","dispatch","interfaceStore","enableComplementaryArea","editPostStore","closeGeneralSidebar","disableComplementaryArea","openModal","type","closeModal","openPublishSidebar","closePublishSidebar","togglePublishSidebar","toggleEditorPanelEnabled","panelName","inactivePanels","select","preferencesStore","get","isPanelInactive","includes","updatedInactivePanels","filter","invactivePanelName","set","toggleEditorPanelOpened","openPanels","isPanelOpen","updatedOpenPanels","openPanelName","removeEditorPanel","toggleFeature","feature","toggle","switchEditorMode","mode","blockEditorStore","clearSelectedBlock","message","togglePinnedPluginItem","pluginName","isPinned","isItemPinned","updatePreferredStyleVariations","blockName","blockStyle","existingVariations","updatedVariations","showBlockTypes","blockNames","existingBlockNames","newBlockNames","Array","isArray","hideBlockTypes","mergedBlockNames","Set","setAvailableMetaBoxesPerLocation","metaBoxesPerLocation","requestMetaBoxUpdates","window","tinyMCE","triggerSave","post","editorStore","getCurrentPost","additionalData","comment_status","ping_status","sticky","author","Boolean","baseFormData","FormData","document","querySelector","activeMetaBoxLocations","getActiveMetaBoxLocations","formDataToMerge","map","location","formData","reduce","memo","currentFormData","key","value","append","forEach","url","_wpMetaBoxUrl","method","body","parse","metaBoxUpdatesSuccess","metaBoxUpdatesFailure","__experimentalSetPreviewDeviceType","deviceType","setIsInserterOpened","setIsListViewOpened","isOpen","setIsEditingTemplate","__unstableSwitchToTemplateMode","newTemplate","isWelcomeGuideActive","isFeatureActive","noticesStore","createSuccessNotice","__unstableCreateTemplate","template","savedTemplate","coreStore","saveEntityRecord","editEntityRecord","id","slug","metaBoxesInitialized","initializeMetaBoxes","isEditorReady","__unstableIsEditorReady","postType","getCurrentPostType","postboxes","page","add_postbox_toggles","wasSavingPost","isSavingPost","wasAutosavingPost","isAutosavingPost","subscribe","shouldTriggerMetaboxesSave","hasMetaBoxes"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { store as interfaceStore } from '@wordpress/interface';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { speak } from '@wordpress/a11y';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { store as editorStore } from '@wordpress/editor';\n\n/**\n * Internal dependencies\n */\nimport { getMetaBoxContainer } from '../utils/meta-boxes';\nimport { store as editPostStore } from '.';\n\n/**\n * Returns an action object used in signalling that the user opened an editor sidebar.\n *\n * @param {?string} name Sidebar name to be opened.\n */\nexport const openGeneralSidebar =\n\t( name ) =>\n\t( { registry } ) =>\n\t\tregistry\n\t\t\t.dispatch( interfaceStore )\n\t\t\t.enableComplementaryArea( editPostStore.name, name );\n\n/**\n * Returns an action object signalling that the user closed the sidebar.\n */\nexport const closeGeneralSidebar =\n\t() =>\n\t( { registry } ) =>\n\t\tregistry\n\t\t\t.dispatch( interfaceStore )\n\t\t\t.disableComplementaryArea( editPostStore.name );\n\n/**\n * Returns an action object used in signalling that the user opened a modal.\n *\n * @param {string} name A string that uniquely identifies the modal.\n *\n * @return {Object} Action object.\n */\nexport function openModal( name ) {\n\treturn {\n\t\ttype: 'OPEN_MODAL',\n\t\tname,\n\t};\n}\n\n/**\n * Returns an action object signalling that the user closed a modal.\n *\n * @return {Object} Action object.\n */\nexport function closeModal() {\n\treturn {\n\t\ttype: 'CLOSE_MODAL',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user opened the publish\n * sidebar.\n *\n * @return {Object} Action object\n */\nexport function openPublishSidebar() {\n\treturn {\n\t\ttype: 'OPEN_PUBLISH_SIDEBAR',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user closed the\n * publish sidebar.\n *\n * @return {Object} Action object.\n */\nexport function closePublishSidebar() {\n\treturn {\n\t\ttype: 'CLOSE_PUBLISH_SIDEBAR',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user toggles the publish sidebar.\n *\n * @return {Object} Action object\n */\nexport function togglePublishSidebar() {\n\treturn {\n\t\ttype: 'TOGGLE_PUBLISH_SIDEBAR',\n\t};\n}\n\n/**\n * Returns an action object used to enable or disable a panel in the editor.\n *\n * @param {string} panelName A string that identifies the panel to enable or disable.\n *\n * @return {Object} Action object.\n */\nexport const toggleEditorPanelEnabled =\n\t( panelName ) =>\n\t( { registry } ) => {\n\t\tconst inactivePanels =\n\t\t\tregistry\n\t\t\t\t.select( preferencesStore )\n\t\t\t\t.get( 'core/edit-post', 'inactivePanels' ) ?? [];\n\n\t\tconst isPanelInactive = !! inactivePanels?.includes( panelName );\n\n\t\t// If the panel is inactive, remove it to enable it, else add it to\n\t\t// make it inactive.\n\t\tlet updatedInactivePanels;\n\t\tif ( isPanelInactive ) {\n\t\t\tupdatedInactivePanels = inactivePanels.filter(\n\t\t\t\t( invactivePanelName ) => invactivePanelName !== panelName\n\t\t\t);\n\t\t} else {\n\t\t\tupdatedInactivePanels = [ ...inactivePanels, panelName ];\n\t\t}\n\n\t\tregistry\n\t\t\t.dispatch( preferencesStore )\n\t\t\t.set( 'core/edit-post', 'inactivePanels', updatedInactivePanels );\n\t};\n\n/**\n * Opens a closed panel and closes an open panel.\n *\n * @param {string} panelName A string that identifies the panel to open or close.\n */\nexport const toggleEditorPanelOpened =\n\t( panelName ) =>\n\t( { registry } ) => {\n\t\tconst openPanels =\n\t\t\tregistry\n\t\t\t\t.select( preferencesStore )\n\t\t\t\t.get( 'core/edit-post', 'openPanels' ) ?? [];\n\n\t\tconst isPanelOpen = !! openPanels?.includes( panelName );\n\n\t\t// If the panel is open, remove it to close it, else add it to\n\t\t// make it open.\n\t\tlet updatedOpenPanels;\n\t\tif ( isPanelOpen ) {\n\t\t\tupdatedOpenPanels = openPanels.filter(\n\t\t\t\t( openPanelName ) => openPanelName !== panelName\n\t\t\t);\n\t\t} else {\n\t\t\tupdatedOpenPanels = [ ...openPanels, panelName ];\n\t\t}\n\n\t\tregistry\n\t\t\t.dispatch( preferencesStore )\n\t\t\t.set( 'core/edit-post', 'openPanels', updatedOpenPanels );\n\t};\n\n/**\n * Returns an action object used to remove a panel from the editor.\n *\n * @param {string} panelName A string that identifies the panel to remove.\n *\n * @return {Object} Action object.\n */\nexport function removeEditorPanel( panelName ) {\n\treturn {\n\t\ttype: 'REMOVE_PANEL',\n\t\tpanelName,\n\t};\n}\n\n/**\n * Triggers an action used to toggle a feature flag.\n *\n * @param {string} feature Feature name.\n */\nexport const toggleFeature =\n\t( feature ) =>\n\t( { registry } ) =>\n\t\tregistry\n\t\t\t.dispatch( preferencesStore )\n\t\t\t.toggle( 'core/edit-post', feature );\n\n/**\n * Triggers an action used to switch editor mode.\n *\n * @param {string} mode The editor mode.\n */\nexport const switchEditorMode =\n\t( mode ) =>\n\t( { registry } ) => {\n\t\tregistry\n\t\t\t.dispatch( preferencesStore )\n\t\t\t.set( 'core/edit-post', 'editorMode', mode );\n\n\t\t// Unselect blocks when we switch to the code editor.\n\t\tif ( mode !== 'visual' ) {\n\t\t\tregistry.dispatch( blockEditorStore ).clearSelectedBlock();\n\t\t}\n\n\t\tconst message =\n\t\t\tmode === 'visual'\n\t\t\t\t? __( 'Visual editor selected' )\n\t\t\t\t: __( 'Code editor selected' );\n\t\tspeak( message, 'assertive' );\n\t};\n\n/**\n * Triggers an action object used to toggle a plugin name flag.\n *\n * @param {string} pluginName Plugin name.\n */\nexport const togglePinnedPluginItem =\n\t( pluginName ) =>\n\t( { registry } ) => {\n\t\tconst isPinned = registry\n\t\t\t.select( interfaceStore )\n\t\t\t.isItemPinned( 'core/edit-post', pluginName );\n\n\t\tregistry\n\t\t\t.dispatch( interfaceStore )\n\t\t\t[ isPinned ? 'unpinItem' : 'pinItem' ](\n\t\t\t\t'core/edit-post',\n\t\t\t\tpluginName\n\t\t\t);\n\t};\n\n/**\n * Returns an action object used in signaling that a style should be auto-applied when a block is created.\n *\n * @param {string}  blockName  Name of the block.\n * @param {?string} blockStyle Name of the style that should be auto applied. If undefined, the \"auto apply\" setting of the block is removed.\n */\nexport const updatePreferredStyleVariations =\n\t( blockName, blockStyle ) =>\n\t( { registry } ) => {\n\t\tif ( ! blockName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst existingVariations =\n\t\t\tregistry\n\t\t\t\t.select( preferencesStore )\n\t\t\t\t.get( 'core/edit-post', 'preferredStyleVariations' ) ?? {};\n\n\t\t// When the blockStyle is omitted, remove the block's preferred variation.\n\t\tif ( ! blockStyle ) {\n\t\t\tconst updatedVariations = {\n\t\t\t\t...existingVariations,\n\t\t\t};\n\n\t\t\tdelete updatedVariations[ blockName ];\n\n\t\t\tregistry\n\t\t\t\t.dispatch( preferencesStore )\n\t\t\t\t.set(\n\t\t\t\t\t'core/edit-post',\n\t\t\t\t\t'preferredStyleVariations',\n\t\t\t\t\tupdatedVariations\n\t\t\t\t);\n\t\t} else {\n\t\t\t// Else add the variation.\n\t\t\tregistry\n\t\t\t\t.dispatch( preferencesStore )\n\t\t\t\t.set( 'core/edit-post', 'preferredStyleVariations', {\n\t\t\t\t\t...existingVariations,\n\t\t\t\t\t[ blockName ]: blockStyle,\n\t\t\t\t} );\n\t\t}\n\t};\n\n/**\n * Update the provided block types to be visible.\n *\n * @param {string[]} blockNames Names of block types to show.\n */\nexport const showBlockTypes =\n\t( blockNames ) =>\n\t( { registry } ) => {\n\t\tconst existingBlockNames =\n\t\t\tregistry\n\t\t\t\t.select( preferencesStore )\n\t\t\t\t.get( 'core/edit-post', 'hiddenBlockTypes' ) ?? [];\n\n\t\tconst newBlockNames = existingBlockNames.filter(\n\t\t\t( type ) =>\n\t\t\t\t! (\n\t\t\t\t\tArray.isArray( blockNames ) ? blockNames : [ blockNames ]\n\t\t\t\t ).includes( type )\n\t\t);\n\n\t\tregistry\n\t\t\t.dispatch( preferencesStore )\n\t\t\t.set( 'core/edit-post', 'hiddenBlockTypes', newBlockNames );\n\t};\n\n/**\n * Update the provided block types to be hidden.\n *\n * @param {string[]} blockNames Names of block types to hide.\n */\nexport const hideBlockTypes =\n\t( blockNames ) =>\n\t( { registry } ) => {\n\t\tconst existingBlockNames =\n\t\t\tregistry\n\t\t\t\t.select( preferencesStore )\n\t\t\t\t.get( 'core/edit-post', 'hiddenBlockTypes' ) ?? [];\n\n\t\tconst mergedBlockNames = new Set( [\n\t\t\t...existingBlockNames,\n\t\t\t...( Array.isArray( blockNames ) ? blockNames : [ blockNames ] ),\n\t\t] );\n\n\t\tregistry\n\t\t\t.dispatch( preferencesStore )\n\t\t\t.set( 'core/edit-post', 'hiddenBlockTypes', [\n\t\t\t\t...mergedBlockNames,\n\t\t\t] );\n\t};\n\n/**\n * Stores info about which Meta boxes are available in which location.\n *\n * @param {Object} metaBoxesPerLocation Meta boxes per location.\n */\nexport function setAvailableMetaBoxesPerLocation( metaBoxesPerLocation ) {\n\treturn {\n\t\ttype: 'SET_META_BOXES_PER_LOCATIONS',\n\t\tmetaBoxesPerLocation,\n\t};\n}\n\n/**\n * Update a metabox.\n */\nexport const requestMetaBoxUpdates =\n\t() =>\n\tasync ( { registry, select, dispatch } ) => {\n\t\tdispatch( {\n\t\t\ttype: 'REQUEST_META_BOX_UPDATES',\n\t\t} );\n\n\t\t// Saves the wp_editor fields.\n\t\tif ( window.tinyMCE ) {\n\t\t\twindow.tinyMCE.triggerSave();\n\t\t}\n\n\t\t// Additional data needed for backward compatibility.\n\t\t// If we do not provide this data, the post will be overridden with the default values.\n\t\tconst post = registry.select( editorStore ).getCurrentPost();\n\t\tconst additionalData = [\n\t\t\tpost.comment_status\n\t\t\t\t? [ 'comment_status', post.comment_status ]\n\t\t\t\t: false,\n\t\t\tpost.ping_status ? [ 'ping_status', post.ping_status ] : false,\n\t\t\tpost.sticky ? [ 'sticky', post.sticky ] : false,\n\t\t\tpost.author ? [ 'post_author', post.author ] : false,\n\t\t].filter( Boolean );\n\n\t\t// We gather all the metaboxes locations data and the base form data.\n\t\tconst baseFormData = new window.FormData(\n\t\t\tdocument.querySelector( '.metabox-base-form' )\n\t\t);\n\t\tconst activeMetaBoxLocations = select.getActiveMetaBoxLocations();\n\t\tconst formDataToMerge = [\n\t\t\tbaseFormData,\n\t\t\t...activeMetaBoxLocations.map(\n\t\t\t\t( location ) =>\n\t\t\t\t\tnew window.FormData( getMetaBoxContainer( location ) )\n\t\t\t),\n\t\t];\n\n\t\t// Merge all form data objects into a single one.\n\t\tconst formData = formDataToMerge.reduce( ( memo, currentFormData ) => {\n\t\t\tfor ( const [ key, value ] of currentFormData ) {\n\t\t\t\tmemo.append( key, value );\n\t\t\t}\n\t\t\treturn memo;\n\t\t}, new window.FormData() );\n\t\tadditionalData.forEach( ( [ key, value ] ) =>\n\t\t\tformData.append( key, value )\n\t\t);\n\n\t\ttry {\n\t\t\t// Save the metaboxes.\n\t\t\tawait apiFetch( {\n\t\t\t\turl: window._wpMetaBoxUrl,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: formData,\n\t\t\t\tparse: false,\n\t\t\t} );\n\t\t\tdispatch.metaBoxUpdatesSuccess();\n\t\t} catch {\n\t\t\tdispatch.metaBoxUpdatesFailure();\n\t\t}\n\t};\n\n/**\n * Returns an action object used to signal a successful meta box update.\n *\n * @return {Object} Action object.\n */\nexport function metaBoxUpdatesSuccess() {\n\treturn {\n\t\ttype: 'META_BOX_UPDATES_SUCCESS',\n\t};\n}\n\n/**\n * Returns an action object used to signal a failed meta box update.\n *\n * @return {Object} Action object.\n */\nexport function metaBoxUpdatesFailure() {\n\treturn {\n\t\ttype: 'META_BOX_UPDATES_FAILURE',\n\t};\n}\n\n/**\n * Returns an action object used to toggle the width of the editing canvas.\n *\n * @param {string} deviceType\n *\n * @return {Object} Action object.\n */\nexport function __experimentalSetPreviewDeviceType( deviceType ) {\n\treturn {\n\t\ttype: 'SET_PREVIEW_DEVICE_TYPE',\n\t\tdeviceType,\n\t};\n}\n\n/**\n * Returns an action object used to open/close the inserter.\n *\n * @param {boolean|Object} value                Whether the inserter should be\n *                                              opened (true) or closed (false).\n *                                              To specify an insertion point,\n *                                              use an object.\n * @param {string}         value.rootClientId   The root client ID to insert at.\n * @param {number}         value.insertionIndex The index to insert at.\n *\n * @return {Object} Action object.\n */\nexport function setIsInserterOpened( value ) {\n\treturn {\n\t\ttype: 'SET_IS_INSERTER_OPENED',\n\t\tvalue,\n\t};\n}\n\n/**\n * Returns an action object used to open/close the list view.\n *\n * @param {boolean} isOpen A boolean representing whether the list view should be opened or closed.\n * @return {Object} Action object.\n */\nexport function setIsListViewOpened( isOpen ) {\n\treturn {\n\t\ttype: 'SET_IS_LIST_VIEW_OPENED',\n\t\tisOpen,\n\t};\n}\n\n/**\n * Returns an action object used to switch to template editing.\n *\n * @param {boolean} value Is editing template.\n * @return {Object} Action object.\n */\nexport function setIsEditingTemplate( value ) {\n\treturn {\n\t\ttype: 'SET_IS_EDITING_TEMPLATE',\n\t\tvalue,\n\t};\n}\n\n/**\n * Switches to the template mode.\n *\n * @param {boolean} newTemplate Is new template.\n */\nexport const __unstableSwitchToTemplateMode =\n\t( newTemplate = false ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tdispatch( setIsEditingTemplate( true ) );\n\t\tconst isWelcomeGuideActive = select.isFeatureActive(\n\t\t\t'welcomeGuideTemplate'\n\t\t);\n\t\tif ( ! isWelcomeGuideActive ) {\n\t\t\tconst message = newTemplate\n\t\t\t\t? __( \"Custom template created. You're in template mode now.\" )\n\t\t\t\t: __(\n\t\t\t\t\t\t'Editing template. Changes made here affect all posts and pages that use the template.'\n\t\t\t\t  );\n\t\t\tregistry.dispatch( noticesStore ).createSuccessNotice( message, {\n\t\t\t\ttype: 'snackbar',\n\t\t\t} );\n\t\t}\n\t};\n\n/**\n * Create a block based template.\n *\n * @param {Object?} template Template to create and assign.\n */\nexport const __unstableCreateTemplate =\n\t( template ) =>\n\tasync ( { registry } ) => {\n\t\tconst savedTemplate = await registry\n\t\t\t.dispatch( coreStore )\n\t\t\t.saveEntityRecord( 'postType', 'wp_template', template );\n\t\tconst post = registry.select( editorStore ).getCurrentPost();\n\t\tregistry\n\t\t\t.dispatch( coreStore )\n\t\t\t.editEntityRecord( 'postType', post.type, post.id, {\n\t\t\t\ttemplate: savedTemplate.slug,\n\t\t\t} );\n\t};\n\nlet metaBoxesInitialized = false;\n\n/**\n * Initializes WordPress `postboxes` script and the logic for saving meta boxes.\n */\nexport const initializeMetaBoxes =\n\t() =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst isEditorReady = registry\n\t\t\t.select( editorStore )\n\t\t\t.__unstableIsEditorReady();\n\n\t\tif ( ! isEditorReady ) {\n\t\t\treturn;\n\t\t}\n\t\t// Only initialize once.\n\t\tif ( metaBoxesInitialized ) {\n\t\t\treturn;\n\t\t}\n\t\tconst postType = registry.select( editorStore ).getCurrentPostType();\n\t\tif ( window.postboxes.page !== postType ) {\n\t\t\twindow.postboxes.add_postbox_toggles( postType );\n\t\t}\n\n\t\tmetaBoxesInitialized = true;\n\n\t\tlet wasSavingPost = registry.select( editorStore ).isSavingPost();\n\t\tlet wasAutosavingPost = registry\n\t\t\t.select( editorStore )\n\t\t\t.isAutosavingPost();\n\n\t\t// Save metaboxes when performing a full save on the post.\n\t\tregistry.subscribe( async () => {\n\t\t\tconst isSavingPost = registry.select( editorStore ).isSavingPost();\n\t\t\tconst isAutosavingPost = registry\n\t\t\t\t.select( editorStore )\n\t\t\t\t.isAutosavingPost();\n\n\t\t\t// Save metaboxes on save completion, except for autosaves.\n\t\t\tconst shouldTriggerMetaboxesSave =\n\t\t\t\twasSavingPost &&\n\t\t\t\t! wasAutosavingPost &&\n\t\t\t\t! isSavingPost &&\n\t\t\t\tselect.hasMetaBoxes();\n\n\t\t\t// Save current state for next inspection.\n\t\t\twasSavingPost = isSavingPost;\n\t\t\twasAutosavingPost = isAutosavingPost;\n\n\t\t\tif ( shouldTriggerMetaboxesSave ) {\n\t\t\t\tawait dispatch.requestMetaBoxUpdates();\n\t\t\t}\n\t\t} );\n\n\t\tdispatch( {\n\t\t\ttype: 'META_BOXES_INITIALIZED',\n\t\t} );\n\t};\n"]}