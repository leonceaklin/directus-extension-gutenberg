{"version":3,"sources":["@wordpress/widgets/src/register-legacy-widget-variations.js"],"names":["subscribe","select","dispatch","store","coreStore","blocksStore","registerLegacyWidgetVariations","settings","unsubscribe","hiddenIds","widgetTypesToHideFromLegacyWidgetBlock","widgetTypes","getWidgetTypes","per_page","filter","widgetType","includes","id","addBlockVariations","map","name","title","description","attributes","is_multi","idBase","instance"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAT,EAAoBC,MAApB,EAA4BC,QAA5B,QAA4C,iBAA5C;AACA,SAASC,KAAK,IAAIC,SAAlB,QAAmC,sBAAnC;AACA,SAASD,KAAK,IAAIE,WAAlB,QAAqC,mBAArC;AAEA,eAAe,SAASC,8BAAT,CAAyCC,QAAzC,EAAoD;AAClE,QAAMC,WAAW,GAAGR,SAAS,CAAE,MAAM;AAAA;;AACpC,UAAMS,SAAS,4BACdF,QADc,aACdA,QADc,uBACdA,QAAQ,CAAEG,sCADI,yEACsC,EADrD;AAEA,UAAMC,WAAW,4BAAGV,MAAM,CAAEG,SAAF,CAAN,CAClBQ,cADkB,CACF;AAAEC,MAAAA,QAAQ,EAAE,CAAC;AAAb,KADE,CAAH,0DAAG,sBAEjBC,MAFiB,CAEPC,UAAF,IAAkB,CAAEN,SAAS,CAACO,QAAV,CAAoBD,UAAU,CAACE,EAA/B,CAFX,CAApB;;AAGA,QAAKN,WAAL,EAAmB;AAClBH,MAAAA,WAAW;AACXN,MAAAA,QAAQ,CAAEG,WAAF,CAAR,CAAwBa,kBAAxB,CACC,oBADD,EAECP,WAAW,CAACQ,GAAZ,CAAmBJ,UAAF,KAAoB;AACpCK,QAAAA,IAAI,EAAEL,UAAU,CAACE,EADmB;AAEpCI,QAAAA,KAAK,EAAEN,UAAU,CAACK,IAFkB;AAGpCE,QAAAA,WAAW,EAAEP,UAAU,CAACO,WAHY;AAIpCC,QAAAA,UAAU,EAAER,UAAU,CAACS,QAAX,GACT;AACAC,UAAAA,MAAM,EAAEV,UAAU,CAACE,EADnB;AAEAS,UAAAA,QAAQ,EAAE;AAFV,SADS,GAKT;AACAT,UAAAA,EAAE,EAAEF,UAAU,CAACE;AADf;AATiC,OAApB,CAAjB,CAFD;AAgBA;AACD,GAzB4B,CAA7B;AA0BA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { subscribe, select, dispatch } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { store as blocksStore } from '@wordpress/blocks';\n\nexport default function registerLegacyWidgetVariations( settings ) {\n\tconst unsubscribe = subscribe( () => {\n\t\tconst hiddenIds =\n\t\t\tsettings?.widgetTypesToHideFromLegacyWidgetBlock ?? [];\n\t\tconst widgetTypes = select( coreStore )\n\t\t\t.getWidgetTypes( { per_page: -1 } )\n\t\t\t?.filter( ( widgetType ) => ! hiddenIds.includes( widgetType.id ) );\n\t\tif ( widgetTypes ) {\n\t\t\tunsubscribe();\n\t\t\tdispatch( blocksStore ).addBlockVariations(\n\t\t\t\t'core/legacy-widget',\n\t\t\t\twidgetTypes.map( ( widgetType ) => ( {\n\t\t\t\t\tname: widgetType.id,\n\t\t\t\t\ttitle: widgetType.name,\n\t\t\t\t\tdescription: widgetType.description,\n\t\t\t\t\tattributes: widgetType.is_multi\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tidBase: widgetType.id,\n\t\t\t\t\t\t\t\tinstance: {},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tid: widgetType.id,\n\t\t\t\t\t\t  },\n\t\t\t\t} ) )\n\t\t\t);\n\t\t}\n\t} );\n}\n"]}