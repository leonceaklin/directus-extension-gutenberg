"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _changeCase = require("change-case");

var _apiFetch = _interopRequireDefault(require("@wordpress/api-fetch"));

var _file = require("./file");

/**
 * External dependencies
 */

/**
 * WordPress dependencies
 */

/**
 * Internal dependencies
 */

/**
 * Export a reusable block as a JSON file.
 *
 * @param {number} id
 */
async function exportReusableBlock(id) {
  const postType = await (0, _apiFetch.default)({
    path: `/wp/v2/types/wp_block`
  });
  const post = await (0, _apiFetch.default)({
    path: `/wp/v2/${postType.rest_base}/${id}?context=edit`
  });
  const title = post.title.raw;
  const content = post.content.raw;
  const fileContent = JSON.stringify({
    __file: 'wp_block',
    title,
    content
  }, null, 2);
  const fileName = (0, _changeCase.paramCase)(title) + '.json';
  (0, _file.download)(fileName, fileContent, 'application/json');
}

var _default = exportReusableBlock;
exports.default = _default;
//# sourceMappingURL=export.js.map