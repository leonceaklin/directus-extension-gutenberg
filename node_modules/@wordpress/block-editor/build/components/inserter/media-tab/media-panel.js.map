{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/media-tab/media-panel.js"],"names":["INITIAL_MEDIA_ITEMS_PER_PAGE","MediaCategoryDialog","rootClientId","onInsert","category","container","timeout","setTimeout","firstTabbable","focus","tabbable","find","current","clearTimeout","MediaCategoryPanel","search","setSearch","debouncedSearch","mediaList","per_page","media_type","mediaType","orderBy","baseCssClass","label","toLocaleLowerCase","Array","isArray","length"],"mappings":";;;;;;;;;;AAGA;;AACA;;AACA;;AACA;;AAKA;;AACA;;AACA;;AACA;;AAdA;AACA;AACA;;AAMA;AACA;AACA;AAMA,MAAMA,4BAA4B,GAAG,EAArC;;AAEO,SAASC,mBAAT,OAAqE;AAAA,MAAvC;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA,QAAhB;AAA0BC,IAAAA;AAA1B,GAAuC;AAC3E,QAAMC,SAAS,GAAG,sBAAlB;AACA,0BAAW,MAAM;AAChB,UAAMC,OAAO,GAAGC,UAAU,CAAE,MAAM;AACjC,YAAM,CAAEC,aAAF,IAAoBC,WAAMC,QAAN,CAAeC,IAAf,CAAqBN,SAAS,CAACO,OAA/B,CAA1B;;AACAJ,MAAAA,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa,CAAEC,KAAf;AACA,KAHyB,CAA1B;AAIA,WAAO,MAAMI,YAAY,CAAEP,OAAF,CAAzB;AACA,GAND,EAMG,CAAEF,QAAF,CANH;AAOA,SACC;AAAK,IAAA,GAAG,EAAGC,SAAX;AAAuB,IAAA,SAAS,EAAC;AAAjC,KACC,4BAAC,kBAAD;AACC,IAAA,YAAY,EAAGH,YADhB;AAEC,IAAA,QAAQ,EAAGC,QAFZ;AAGC,IAAA,QAAQ,EAAGC;AAHZ,IADD,CADD;AASA;;AAEM,SAASU,kBAAT,QAAoE;AAAA,MAAvC;AAAEZ,IAAAA,YAAF;AAAgBC,IAAAA,QAAhB;AAA0BC,IAAAA;AAA1B,GAAuC;AAC1E,QAAM,CAAEW,MAAF,EAAUC,SAAV,EAAqBC,eAArB,IAAyC,iCAA/C;AACA,QAAMC,SAAS,GAAG,4BAAiB;AAClCC,IAAAA,QAAQ,EAAE,CAAC,CAAEF,eAAH,GAAqB,EAArB,GAA0BjB,4BADF;AAElCoB,IAAAA,UAAU,EAAEhB,QAAQ,CAACiB,SAFa;AAGlCN,IAAAA,MAAM,EAAEE,eAH0B;AAIlCK,IAAAA,OAAO,EAAE,CAAC,CAAEL,eAAH,GAAqB,WAArB,GAAmC;AAJV,GAAjB,CAAlB;AAMA,QAAMM,YAAY,GAAG,oCAArB;AACA,SACC;AAAK,IAAA,SAAS,EAAGA;AAAjB,KACC,4BAAC,yBAAD;AACC,IAAA,SAAS,EAAI,GAAGA,YAAc,SAD/B;AAEC,IAAA,QAAQ,EAAGP,SAFZ;AAGC,IAAA,KAAK,EAAGD,MAHT;AAIC,IAAA,KAAK,EAAG;AACP;AACA,kBAAI,WAAJ,CAFO,EAGPX,QAAQ,CAACoB,KAAT,CAAeC,iBAAf,EAHO,CAJT;AASC,IAAA,WAAW,EAAG;AACb;AACA,kBAAI,WAAJ,CAFa,EAGbrB,QAAQ,CAACoB,KAAT,CAAeC,iBAAf,EAHa;AATf,IADD,EAgBG,CAAEP,SAAF,IACD;AAAK,IAAA,SAAS,EAAI,GAAGK,YAAc;AAAnC,KACC,4BAAC,mBAAD,OADD,CAjBF,EAqBGG,KAAK,CAACC,OAAN,CAAeT,SAAf,KAA8B,CAAEA,SAAS,CAACU,MAA1C,IACD,4BAAC,kBAAD,OAtBF,EAwBG,CAAC,EAAEV,SAAF,aAAEA,SAAF,eAAEA,SAAS,CAAEU,MAAb,CAAD,IACD,4BAAC,kBAAD;AACC,IAAA,YAAY,EAAG1B,YADhB;AAEC,IAAA,OAAO,EAAGC,QAFX;AAGC,IAAA,SAAS,EAAGe,SAHb;AAIC,IAAA,SAAS,EAAGd,QAAQ,CAACiB;AAJtB,IAzBF,CADD;AAmCA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport { Spinner, SearchControl } from '@wordpress/components';\nimport { focus } from '@wordpress/dom';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport MediaList from './media-list';\nimport useDebouncedInput from '../hooks/use-debounced-input';\nimport { useMediaResults } from './hooks';\nimport InserterNoResults from '../no-results';\n\nconst INITIAL_MEDIA_ITEMS_PER_PAGE = 10;\n\nexport function MediaCategoryDialog( { rootClientId, onInsert, category } ) {\n\tconst container = useRef();\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tconst [ firstTabbable ] = focus.tabbable.find( container.current );\n\t\t\tfirstTabbable?.focus();\n\t\t} );\n\t\treturn () => clearTimeout( timeout );\n\t}, [ category ] );\n\treturn (\n\t\t<div ref={ container } className=\"block-editor-inserter__media-dialog\">\n\t\t\t<MediaCategoryPanel\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\tcategory={ category }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport function MediaCategoryPanel( { rootClientId, onInsert, category } ) {\n\tconst [ search, setSearch, debouncedSearch ] = useDebouncedInput();\n\tconst mediaList = useMediaResults( {\n\t\tper_page: !! debouncedSearch ? 20 : INITIAL_MEDIA_ITEMS_PER_PAGE,\n\t\tmedia_type: category.mediaType,\n\t\tsearch: debouncedSearch,\n\t\torderBy: !! debouncedSearch ? 'relevance' : 'date',\n\t} );\n\tconst baseCssClass = 'block-editor-inserter__media-panel';\n\treturn (\n\t\t<div className={ baseCssClass }>\n\t\t\t<SearchControl\n\t\t\t\tclassName={ `${ baseCssClass }-search` }\n\t\t\t\tonChange={ setSearch }\n\t\t\t\tvalue={ search }\n\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t/* translators: %s: Name of the media category(ex. 'images, videos'). */\n\t\t\t\t\t__( 'Search %s' ),\n\t\t\t\t\tcategory.label.toLocaleLowerCase()\n\t\t\t\t) }\n\t\t\t\tplaceholder={ sprintf(\n\t\t\t\t\t/* translators: %s: Name of the media category(ex. 'images, videos'). */\n\t\t\t\t\t__( 'Search %s' ),\n\t\t\t\t\tcategory.label.toLocaleLowerCase()\n\t\t\t\t) }\n\t\t\t/>\n\t\t\t{ ! mediaList && (\n\t\t\t\t<div className={ `${ baseCssClass }-spinner` }>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ Array.isArray( mediaList ) && ! mediaList.length && (\n\t\t\t\t<InserterNoResults />\n\t\t\t) }\n\t\t\t{ !! mediaList?.length && (\n\t\t\t\t<MediaList\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tonClick={ onInsert }\n\t\t\t\t\tmediaList={ mediaList }\n\t\t\t\t\tmediaType={ category.mediaType }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n"]}