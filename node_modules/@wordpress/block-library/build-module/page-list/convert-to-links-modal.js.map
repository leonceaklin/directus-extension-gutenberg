{"version":3,"sources":["@wordpress/block-library/src/page-list/convert-to-links-modal.js"],"names":["Button","Modal","__","useDispatch","useEntityRecords","store","blockEditorStore","convertToNavigationLinks","convertDescription","PAGE_FIELDS","MAX_PAGE_COUNT","ConvertToLinksModal","onClose","clientId","records","pages","hasResolved","pagesFinished","per_page","_fields","orderby","order","replaceBlock","describedby","navigationLinks"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,MAAT,EAAiBC,KAAjB,QAA8B,uBAA9B;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,SAASC,KAAK,IAAIC,gBAAlB,QAA0C,yBAA1C;AACA;AACA;AACA;;AACA,SAASC,wBAAT,QAAyC,+BAAzC;AAEA;AACA;AACA;;AACA,SAASC,kBAAT,QAAmC,aAAnC;AAEA,MAAMC,WAAW,GAAG,CAAE,IAAF,EAAQ,OAAR,EAAiB,MAAjB,EAAyB,MAAzB,EAAiC,QAAjC,CAApB;AACA,MAAMC,cAAc,GAAG,GAAvB;AAEA,eAAe,SAASC,mBAAT,OAAsD;AAAA,MAAxB;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,GAAwB;AACpE,QAAM;AAAEC,IAAAA,OAAO,EAAEC,KAAX;AAAkBC,IAAAA,WAAW,EAAEC;AAA/B,MAAiDb,gBAAgB,CACtE,UADsE,EAEtE,MAFsE,EAGtE;AACCc,IAAAA,QAAQ,EAAER,cADX;AAECS,IAAAA,OAAO,EAAEV,WAFV;AAGC;AACA;AACA;AACAW,IAAAA,OAAO,EAAE,YANV;AAOCC,IAAAA,KAAK,EAAE;AAPR,GAHsE,CAAvE;AAcA,QAAM;AAAEC,IAAAA;AAAF,MAAmBnB,WAAW,CAAEG,gBAAF,CAApC;AAEA,SACC,cAAC,KAAD;AACC,IAAA,UAAU,EAAGJ,EAAE,CAAE,OAAF,CADhB;AAEC,IAAA,cAAc,EAAGU,OAFlB;AAGC,IAAA,KAAK,EAAGV,EAAE,CAAE,qBAAF,CAHX;AAIC,IAAA,SAAS,EAAG,0BAJb;AAKC,IAAA,IAAI,EAAG;AAAEqB,MAAAA,WAAW,EAAE;AAAf;AALR,KAOC;AAAG,IAAA,EAAE,EAAG;AAAR,KACGf,kBADH,CAPD,EAUC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,cAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,UAAhB;AAA2B,IAAA,OAAO,EAAGI;AAArC,KACGV,EAAE,CAAE,QAAF,CADL,CADD,EAIC,cAAC,MAAD;AACC,IAAA,OAAO,EAAC,SADT;AAEC,IAAA,QAAQ,EAAG,CAAEe,aAFd;AAGC,IAAA,OAAO,EAAG,MAAM;AACf,YAAMO,eAAe,GACpBjB,wBAAwB,CAAEQ,KAAF,CADzB,CADe,CAIf;;AACAO,MAAAA,YAAY,CAAET,QAAF,EAAYW,eAAZ,CAAZ;AACA;AATF,KAWGtB,EAAE,CAAE,WAAF,CAXL,CAJD,CAVD,CADD;AA+BA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Button, Modal } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useDispatch } from '@wordpress/data';\nimport { useEntityRecords } from '@wordpress/core-data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\n/**\n * Internal dependencies\n */\nimport { convertToNavigationLinks } from './convert-to-navigation-links';\n\n/**\n * Internal dependencies\n */\nimport { convertDescription } from './constants';\n\nconst PAGE_FIELDS = [ 'id', 'title', 'link', 'type', 'parent' ];\nconst MAX_PAGE_COUNT = 100;\n\nexport default function ConvertToLinksModal( { onClose, clientId } ) {\n\tconst { records: pages, hasResolved: pagesFinished } = useEntityRecords(\n\t\t'postType',\n\t\t'page',\n\t\t{\n\t\t\tper_page: MAX_PAGE_COUNT,\n\t\t\t_fields: PAGE_FIELDS,\n\t\t\t// TODO: When https://core.trac.wordpress.org/ticket/39037 REST API support for multiple orderby\n\t\t\t// values is resolved, update 'orderby' to [ 'menu_order', 'post_title' ] to provide a consistent\n\t\t\t// sort.\n\t\t\torderby: 'menu_order',\n\t\t\torder: 'asc',\n\t\t}\n\t);\n\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\n\n\treturn (\n\t\t<Modal\n\t\t\tcloseLabel={ __( 'Close' ) }\n\t\t\tonRequestClose={ onClose }\n\t\t\ttitle={ __( 'Customize this menu' ) }\n\t\t\tclassName={ 'wp-block-page-list-modal' }\n\t\t\taria={ { describedby: 'wp-block-page-list-modal__description' } }\n\t\t>\n\t\t\t<p id={ 'wp-block-page-list-modal__description' }>\n\t\t\t\t{ convertDescription }\n\t\t\t</p>\n\t\t\t<div className=\"wp-block-page-list-modal-buttons\">\n\t\t\t\t<Button variant=\"tertiary\" onClick={ onClose }>\n\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tdisabled={ ! pagesFinished }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tconst navigationLinks =\n\t\t\t\t\t\t\tconvertToNavigationLinks( pages );\n\n\t\t\t\t\t\t// Replace the Page List block with the Navigation Links.\n\t\t\t\t\t\treplaceBlock( clientId, navigationLinks );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Customize' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n"]}