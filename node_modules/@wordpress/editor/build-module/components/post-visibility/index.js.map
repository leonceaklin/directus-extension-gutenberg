{"version":3,"sources":["@wordpress/editor/src/components/post-visibility/index.js"],"names":["__","useState","VisuallyHidden","__experimentalConfirmDialog","ConfirmDialog","useInstanceId","useSelect","useDispatch","__experimentalInspectorPopoverHeader","InspectorPopoverHeader","visibilityOptions","store","editorStore","PostVisibility","onClose","instanceId","status","visibility","password","select","getEditedPostAttribute","getEditedPostVisibility","editPost","savePost","hasPassword","setHasPassword","showPrivateConfirmDialog","setShowPrivateConfirmDialog","setPublic","setPrivate","confirmPrivate","handleDialogCancel","setPasswordProtected","updatePassword","event","target","value","public","label","info","private","PostVisibilityChoice","props"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\tVisuallyHidden,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { visibilityOptions } from './utils';\nimport { store as editorStore } from '../../store';\n\nexport default function PostVisibility( { onClose } ) {\n\tconst instanceId = useInstanceId( PostVisibility );\n\n\tconst { status, visibility, password } = useSelect( ( select ) => ( {\n\t\tstatus: select( editorStore ).getEditedPostAttribute( 'status' ),\n\t\tvisibility: select( editorStore ).getEditedPostVisibility(),\n\t\tpassword: select( editorStore ).getEditedPostAttribute( 'password' ),\n\t} ) );\n\n\tconst { editPost, savePost } = useDispatch( editorStore );\n\n\tconst [ hasPassword, setHasPassword ] = useState( !! password );\n\tconst [ showPrivateConfirmDialog, setShowPrivateConfirmDialog ] =\n\t\tuseState( false );\n\n\tconst setPublic = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: '',\n\t\t} );\n\t\tsetHasPassword( false );\n\t};\n\n\tconst setPrivate = () => {\n\t\tsetShowPrivateConfirmDialog( true );\n\t};\n\n\tconst confirmPrivate = () => {\n\t\teditPost( { status: 'private', password: '' } );\n\t\tsetHasPassword( false );\n\t\tsetShowPrivateConfirmDialog( false );\n\t\tsavePost();\n\t};\n\n\tconst handleDialogCancel = () => {\n\t\tsetShowPrivateConfirmDialog( false );\n\t};\n\n\tconst setPasswordProtected = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: password || '',\n\t\t} );\n\t\tsetHasPassword( true );\n\t};\n\n\tconst updatePassword = ( event ) => {\n\t\teditPost( { password: event.target.value } );\n\t};\n\n\treturn (\n\t\t<div className=\"editor-post-visibility\">\n\t\t\t<InspectorPopoverHeader\n\t\t\t\ttitle={ __( 'Visibility' ) }\n\t\t\t\thelp={ __( 'Control how this post is viewed.' ) }\n\t\t\t\tonClose={ onClose }\n\t\t\t/>\n\t\t\t<fieldset className=\"editor-post-visibility__fieldset\">\n\t\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t\t{ __( 'Visibility' ) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"public\"\n\t\t\t\t\tlabel={ visibilityOptions.public.label }\n\t\t\t\t\tinfo={ visibilityOptions.public.info }\n\t\t\t\t\tchecked={ visibility === 'public' && ! hasPassword }\n\t\t\t\t\tonChange={ setPublic }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"private\"\n\t\t\t\t\tlabel={ visibilityOptions.private.label }\n\t\t\t\t\tinfo={ visibilityOptions.private.info }\n\t\t\t\t\tchecked={ visibility === 'private' }\n\t\t\t\t\tonChange={ setPrivate }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"password\"\n\t\t\t\t\tlabel={ visibilityOptions.password.label }\n\t\t\t\t\tinfo={ visibilityOptions.password.info }\n\t\t\t\t\tchecked={ hasPassword }\n\t\t\t\t\tonChange={ setPasswordProtected }\n\t\t\t\t/>\n\t\t\t\t{ hasPassword && (\n\t\t\t\t\t<div className=\"editor-post-visibility__password\">\n\t\t\t\t\t\t<VisuallyHidden\n\t\t\t\t\t\t\tas=\"label\"\n\t\t\t\t\t\t\thtmlFor={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create password' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"editor-post-visibility__password-input\"\n\t\t\t\t\t\t\tid={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={ updatePassword }\n\t\t\t\t\t\t\tvalue={ password }\n\t\t\t\t\t\t\tplaceholder={ __( 'Use a secure password' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</fieldset>\n\t\t\t<ConfirmDialog\n\t\t\t\tisOpen={ showPrivateConfirmDialog }\n\t\t\t\tonConfirm={ confirmPrivate }\n\t\t\t\tonCancel={ handleDialogCancel }\n\t\t\t>\n\t\t\t\t{ __( 'Would you like to privately publish this post now?' ) }\n\t\t\t</ConfirmDialog>\n\t\t</div>\n\t);\n}\n\nfunction PostVisibilityChoice( { instanceId, value, label, info, ...props } ) {\n\treturn (\n\t\t<div className=\"editor-post-visibility__choice\">\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tname={ `editor-post-visibility__setting-${ instanceId }` }\n\t\t\t\tvalue={ value }\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\taria-describedby={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__radio\"\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t\t<label\n\t\t\t\thtmlFor={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\tclassName=\"editor-post-visibility__label\"\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</label>\n\t\t\t<p\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__info\"\n\t\t\t>\n\t\t\t\t{ info }\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n"]}